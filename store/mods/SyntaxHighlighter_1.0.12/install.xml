<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.2.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		
		<title lang="en">Syntax Highlighter</title>
		
		<description lang="en">Adds a BBCode 'syntax' which allows you to post programs/scripts in upto 132 languages and have the post Syntax Highlighted using GeSHi.</description>
		
		<author-notes lang="en">The added BBCode will not be shown on the posting page as this mod is hooked into phpBB, however, you can alter the 'Custom BBCodes Page' mod by stokerpiller to show how to use the syntax tag. Check the 'contrib/boardbbcodes_changes.txt' file for details on the changes.
		
		If you wish to use the langauge as a BBCode tag then see the file: contrib/lang_as_bbcode_tag.txt for information on what to change tp enable the feature.
		
		Thanks are due to:
		CyberAlien - for releasing the original BBCode parser to the public.
		baboon - for (at time of posting this) a part complete Spanish translation
		mrbaseball34 - for the idea to use the language as a BBCode tag
		Bigwebmaster - for pointing out some errors I'd missed... and the fact that 'debug mode' is there for a reason.		
		</author-notes>
		
		<author-group>
			<author>
				<realname></realname>
				<username>UseLess</username>
				<homepage>http://www.phpbbstyles.co.uk</homepage>
			</author>
			<author>
				<realname>Vjacheslav Trushkin</realname>
				<username>CyberAlien</username>
				<homepage>http://www.stsoftware.biz</homepage>
			</author>
		</author-group>
		
		<mod-version>1.0.12</mod-version>
		
		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.5</target-version>
		</installation>

		<history>
			<entry>
				<date>2009-07-09</date>
				<rev-version>1.0.12</rev-version>
				<changelog lang="en">
					<change>Now works in MCP when viewing reported posts preview</change>
					<change>Fixed other issues when DEBUG mode was enabled</change>
					<change>added method to remove the link stuff added by phpBB</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-07-02</date>
				<rev-version>1.0.11</rev-version>
				<changelog lang="en">
					<change>if the basic tag is used, i.e. [syntax] then the mod will add line numbers, as it previously did</change>
					<change>changed 'syntax=' to 'lang='</change>
					<change>if either [syntax=lang name] or [syntax lang=lang name] is used then, by default, no line numbers will be shown</change>
					<change>added the ability to use [language name], i.e. [ asp ] .. [ /asp ] for an ASP code listing</change>
					<change>added lines option can be either 'lines=geshi-n' for normal geshi generated line numbers or 'lines=geshi-f' for fancy lines also generated by geshi</change>
					<change>added fancy option which is only used with the 'geshi-f', as detailed above, to specify which lines should be fancy, i.e. if 5 is specified then every 5th line will be fancy, the default is 5 if no value is specified</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-06-25</date>
				<rev-version>1.0.10</rev-version>
				<changelog lang="en">
					<change>version not released</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-06-21</date>
				<rev-version>1.0.9</rev-version>
				<changelog lang="en">
					<change>minor issues fixed as pointed out by the phpBB.com MOD Team</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-06-01</date>
				<rev-version>1.0.8</rev-version>
				<changelog lang="en">
					<change>updated GeSHi to version 1.0.8.4</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-05-23</date>
				<rev-version>1.0.7</rev-version>
				<changelog lang="en">
					<change>altered DIY Instructions to also include info about refreshing Theme data</change>
					<change>moved some hard coded language stuff into language files</change>
					<change>removed use of $GLOBAL array</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-04-28</date>
				<rev-version>1.0.6</rev-version>
				<changelog lang="en">
					<change>now works in PM, PM Preview, PM History, Message Review, Message Preview</change>
					<change>altered bbc_download.php to use requeat_var and now can download code from PM</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-04-26</date>
				<rev-version>1.0.5</rev-version>
				<changelog lang="en">
					<change>Changed CSS Class name from 'code ...' to 'syntax ...'</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-04-24</date>
				<rev-version>1.0.4</rev-version>
				<changelog lang="en">
					<change>changed version number and state from DEV to RC</change>
					<change>fixed bug in bbc_download.php</change>
					<change>altered CSS</change>
					<change>Removed static text and added them to 'language/en/common.php'</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-04-23</date>
				<rev-version>0.0.3</rev-version>
				<changelog lang="en">
					<change>Updated GeSHi to version 1.0.8.3</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-04-22</date>
				<rev-version>0.0.2</rev-version>
				<changelog lang="en">
					<change>test release</change>
				</changelog>
			</entry>
		</history>
	</header>
	
	<action-group>

		<copy>
			<file from="root/classes/index.htm" to="classes/index.htm" />
			<file from="root/classes/scripts/select_expand_bbcodes.js" to="classes/scripts/select_expand_bbcodes.js" />
			<file from="root/classes/scripts/index.htm" to="classes/scripts/index.htm" />
			<file from="root/includes/geshi/*.*" to="includes/geshi/*.*" />
			<file from="root/includes/hooks/hook_syntax_highlighter.php" to="includes/hooks/hook_syntax_highlighter.php" />
			<file from="root/includes/geshi.php" to="includes/geshi.php" />
			<file from="root/language/en/mods/useless_xs_bbcode.php" to="language/en/mods/useless_xs_bbcode.php" />
			<file from="root/styles/prosilver/template/xs_bbcode_fn.js" to="styles/prosilver/template/xs_bbcode_fn.js" />
			<file from="root/styles/prosilver/theme/ul_syntaxhighlighter.css" to="styles/prosilver/theme/ul_syntaxhighlighter.css" />
			<file from="root/bbc_download.php" to="bbc_download.php" />
		</copy>

		<open src="language/en/common.php">
			<edit>
				<comment lang="en">End of the file.</comment>
				<find><![CDATA[?>]]></find>
				<action type="before-add"><![CDATA[// XS Syntax Highlighter
$lang = array_merge($lang, array(
	'XS_SH_INFO_VERSION'	=> 'Syntax Highlighter based on the XS BBCode parser.',
	
	'XS_SH_NOTE'				=> 'Note',
	'XS_SH_TAG_ONCE'		=> 'You may only use this BBCode Tag once in a signature.',
	'XS_SH_TAG_SIG'			=> 'This tag can only be used in signatures.',
	'XS_SH_TAG_NOSIG'		=> 'This tag cannot be used in signatures.',
	
	'XS_SH_NO_TOPIC_ID'	=> 'No topic id supplied.',
	'XS_SH_NO_TOPIC'		=> 'The requested topic id does not exist.',
	'XS_SH_NO_CONTENT'	=> 'The requested topic id does not contain anything to download.',

	// Help lines - used if using the boardbbcodes mod
	'XS_SH_TAG_VERSION'	=> 'Displays BBCode (Hooker) Version information: [version][/version] or [version /]',
	'XS_SH_TAG_SYNTAX'	=> '<b>Syntax Highlighting</b>: [syntax="php"] code in here [/syntax] or [syntax lang="php" filename="file.php" start="10"] code in here [/syntax]',
));]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<comment lang="en"></comment>
				<find><![CDATA[<script type="text/javascript" src="{T_TEMPLATE_PATH}/forum_fn.js"></script>]]></find>
				<action type="after-add"><![CDATA[<script type="text/javascript" src="{T_TEMPLATE_PATH}/xs_bbcode_fn.js"></script>
<script type="text/javascript" src="./classes/scripts/select_expand_bbcodes.js"></script>]]>
</action>
			</edit>
		</open>

		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<comment lang="en"></comment>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="after-add"><![CDATA[@import url("ul_syntaxhighlighter.css");]]></action>
			</edit>
		</open>

		<diy-instructions lang="en">Once the updated files are uploaded to the remote server don't forget to Clear the cache and refresh the Theme data</diy-instructions>

	</action-group>
</mod>