<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="./modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.1.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

		<title lang="en">Milestone Congratulations</title>
		<title lang="de">Meilenstein-Gratulierer</title>

		<description lang="en">Enables the setup of milestones for members to reach. These may consist of (numbers freely adjustable): Making the 1000th post, creating the 1000th topic or registering as the 50th user. The user accomplishing a goal will be displayed on the index page until the next milestone is reached. Upon reaching a milestone the counter automatically increments by an (once again) adjustable amount.

For every accomplished goal a database entry is created which can be used with medals, cash or points of any kind; also there's a new "history page" that displays all milestones.</description>
		<description lang="de">Ermöglicht das Setzen von Meilensteinen, welche die Benutzer des Forums erreichen können. Meilensteine können sein (Werte frei einstellbar): Den insgesamt 1000. Beitrag zu schreiben, das insgesamt 100. Thema zu erstellen oder der 50. registrierte Benutzer zu sein. Der Nutzer, der eine der Vorgaben erfüllt, wird auf der Startseite verewigt, bis der nächste Meilenstein erreicht ist. Bei Erreichen eines Zieles wird der Zähler automatisch um eine (ebenfalls) festzulegende Schrittweite erhöht.

Zudem wird über jeden erreichten Meilenstein ein Datenbankeintrag erstellt, der die weitere Nutzung in Cashmods, für Punkte oder Medaillen ermöglicht; es steht auch eine neue Seite zur Verfügung, die die bisher erreichten Meilensteine ausgibt.</description>

		<author-group>
			<author>
				<realname>Martin Rauscher</realname>
				<username>MartectX</username>
				<homepage>http://mods.martectx.de/</homepage>
			</author>
		</author-group>
		
		<mod-version>1.2.6</mod-version>

		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.2</target-version>
		</installation>

		<history>
			<entry>
				<date>2008-09-19</date>
				<rev-version>1.2.6</rev-version>
				<changelog lang="en">
					<change>Validation changes (mostly cross-dbms compatibility)</change>
				</changelog>
				<changelog lang="de">
					<change>Validierungsänderungen (v.a. Kompatibilität mit mehreren Datenbanktypen)</change>
				</changelog>
			</entry>
		</history>
		<link-group>
			<link type="parent" href="./../install.xml" lang="en">Mod installation instructions</link>
			<link type="parent" href="./../install.xml" lang="de">Mod-Installationsanweisungen</link>
			<link type="contrib" href="./mod_version_check.xml" lang="en">MOD Version Check</link>
			<link type="contrib" href="./mod_version_check.xml" lang="de">MOD Version Check</link>
			</link-group>
	</header>

	<action-group>
		<copy>
			<file from="root/adm/style/acp_milestone_congratulations.html" to="adm/style/acp_milestone_congratulations.html" />
			<file from="root/includes/functions_milestones.php" to="includes/functions_milestones.php" />
			<file from="root/includes/acp/acp_milestone_congratulations.php" to="includes/acp/acp_milestone_congratulations.php" />
			<file from="root/includes/acp/info/acp_milestone_congratulations.php" to="includes/acp/info/acp_milestone_congratulations.php" />
		</copy>

		<open src="index.php">
			<edit>
				<find>include($phpbb_root_path . 'includes/functions_display_milestones.' . $phpEx);</find>
				<action type="replace-with">include($phpbb_root_path . 'includes/functions_milestones.' . $phpEx);
$user->add_lang('mods/milestone_congratulations');</action>
			</edit>
			<edit>
				<find>	'MILESTONE_INFO'	=> $milestone_info,
	'MILESTONE_MESSAGE'	=> $milestone_message,
	'MILESTONE_HISTORY'	=> $milestone_history,</find>
				<action type="replace-with">	'MILESTONE_INFO'	=> milestone_info(),
	'MILESTONE_MESSAGE'	=> milestone_message(),
	'MILESTONE_HISTORY'	=> milestone_history(),</action>
			</edit>
		</open>

		<open src="includes/functions.php">
			<edit>
				<find>	include_once($phpbb_root_path . 'includes/functions_milestones.' . $phpEx);</find>
				<action type="replace-with">	if (!function_exists('milestones'))
	{
		include($phpbb_root_path . 'includes/functions_milestones.' . $phpEx);
	}
	milestones();
</action>
			</edit>
		</open>

		<open src="styles/prosilver/template/index_body.html">
			<edit>
				<find><![CDATA[	<p>{TOTAL_POSTS} &bull; {TOTAL_TOPICS} &bull; {TOTAL_USERS} &bull; {NEWEST_USER}<br />{MILESTONE_MESSAGE} {MILESTONE_HISTORY}<!-- IF U_ACP -->{MILESTONE_INFO}<!-- ENDIF --></p>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<!-- IF U_ACP -->{MILESTONE_INFO}<!-- ENDIF -->]]></inline-find>
					<inline-action type="replace-with">{MILESTONE_INFO}</inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="styles/subsilver2/template/index_body.html">
			<edit>
				<find><![CDATA[	<td class="row1" width="100%" valign="middle"><p class="genmed">{TOTAL_POSTS} | {TOTAL_TOPICS} | {TOTAL_USERS} | {NEWEST_USER}<br />{MILESTONE_MESSAGE} {MILESTONE_HISTORY}<!-- IF U_ACP -->{MILESTONE_INFO}<!-- ENDIF --></p></td>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<!-- IF U_ACP -->{MILESTONE_INFO}<!-- ENDIF -->]]></inline-find>
					<inline-action type="replace-with">{MILESTONE_INFO}</inline-action>
				</inline-edit>
			</edit>
		</open>

		<diy-instructions lang="en">Clear the cache by logging into your Admin Control Panel and clicking "Run now" next to "Purge the cache".

Delete "includes/functions_display_milestones.php".

In the Admin Control Panel open the .MODS tab and choose "Milestone Congratulations Setup" (this will automatically do some database updates).</diy-instructions>
		<diy-instructions lang="de">Leere den Cache, indem du dich in den Administrationsbereich deines Forums einloggst und bei "Den Cache leeren" auf "Jetzt ausführen" klickst.

Lösche "includes/functions_display_milestones.php".

Im Administrationsbereich wähle den Reiter MODS und klicke auf "Einstellungen des Meilenstein-Gratulierers" (es werden automatisch Datenbankupdates durchgeführt).</diy-instructions>
	</action-group>
</mod>
